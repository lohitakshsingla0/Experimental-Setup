<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Experimenter Dashboard</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.16.9/xlsx.full.min.js"></script>
</head>
<body>
    <div class="d-flex" id="wrapper">
        <!-- Sidebar -->
        <div class="bg-dark border-right" id="sidebar-wrapper">
            <div class="sidebar-heading text-white">Experimenter Dashboard</div>
            <hr class="sidebar-separator">
            <div class="list-group list-group-flush">
                <a href="#" class="list-group-item list-group-item-action bg-dark text-white" onclick="showSection('homepage')">Homepage</a>
                <a href="#" class="list-group-item list-group-item-action bg-dark text-white" onclick="showSection('sendLinks')">Send Users Experiment Links</a>
                <a href="#" class="list-group-item list-group-item-action bg-dark text-white" onclick="showSection('addUsecases')">Add Use Cases</a>
                <a href="#" class="list-group-item list-group-item-action bg-dark text-white" onclick="showSection('editFeedback')">Create Feedback</a>
                <a href="#" class="list-group-item list-group-item-action bg-dark text-white" onclick="showSection('viewFeedback')">View All Feedback Forms</a>
                <a href="#" class="list-group-item list-group-item-action bg-dark text-white" onclick="showSection('seeRepositories')">See Database Repositories</a>
                <a href="#" class="list-group-item list-group-item-action bg-dark text-white" onclick="showSection('deleteExperiment')">Delete Experiment</a>
            </div>
        </div>
        <!-- /#sidebar-wrapper -->

        <!-- Page Content -->
        <div id="page-content-wrapper" class="flex-grow-1">
            <nav class="navbar navbar-expand-lg navbar-light bg-light border-bottom">
                <div class="ml-auto d-flex align-items-center">
                    <span class="mr-2">Hello Experimenter</span>
                    <img src="https://via.placeholder.com/30" alt="User Icon" class="rounded-circle user-icon">
                </div>
            </nav>

            <div class="container-fluid mt-4">
                <!-- Homepage Section -->
                <div id="homepage" class="section active">
                    <div class="jumbotron bg-primary text-white">
                        <h1 class="display-4">Welcome to the Experimenter Dashboard</h1>
                        <p class="lead">This dashboard allows you to manage and distribute experimental setups efficiently.</p>
                        <hr class="my-4">
                        <p>Use the sidebar to navigate through different sections of the dashboard. If this is your first time, please read the instructions below to understand the functionalities.</p>
                    </div>
                    <div class="card shadow p-4">
                        <h3>Instructions</h3>
                        <ul class="list-group">
                            <li class="list-group-item">To send experiment links to users, go to the "Send Users Experiment Links" section.</li>
                            <li class="list-group-item">To add new use cases, go to the "Add Use Cases" section.</li>
                            <li class="list-group-item">To view feedback from users, go to the "View Feedback" section.</li>
                            <li class="list-group-item">To see database repositories, go to the "See Database Repositories" section.</li>
                        </ul>
                    </div>
                </div>

                <div id="sendLinks" class="section">
                    <h2 class="mt-4">Send Users Experiment Links</h2>
                    <div class="card shadow p-4">
                        <form id="experimentForm">
                            <div class="form-group">
                                <label for="experimentTopic">Select Experiment Topic</label>
                                <select class="form-control" id="experimentTopic" required>
                                    <!-- Options will be populated dynamically -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Available Chatbots</label>
                                <ul id="chatbotList" class="list-group">
                                    <!-- Chatbot links will be populated dynamically -->
                                </ul>
                            </div>
                            <div class="form-group">
                                <label for="uploadFile">Upload Excel File</label>
                                <input type="file" class="form-control" id="uploadFile" accept=".xlsx, .xls" required>
                            </div>
                            <div class="form-group">
                                <label for="emailList">Emails</label>
                                <textarea class="form-control" id="emailList" rows="5" readonly></textarea>
                            </div>
                            <button type="button" class="btn btn-primary btn-block" onclick="processAndSendEmails()">Send</button>
                        </form>
                    </div>
                </div>

                <!-- Add Use Cases Section -->
                <div id="addUsecases" class="section">
                    <h2 class="mt-4">Add Use Cases</h2>
                    <div class="card shadow p-4">
                        <form id="usecaseForm">
                            <div class="form-group">
                                <label for="usecaseTitle">Experiment Title</label>
                                <input type="text" class="form-control" id="usecaseTitle" placeholder="Enter experiment title" required>
                            </div>
                            <div class="form-group">
                                <label for="numChatbots">Number of Chatbots</label>
                                <input type="number" class="form-control" id="numChatbots" placeholder="Enter number of chatbots" required>
                            </div>
                            <button type="button" class="btn btn-primary btn-block" onclick="generateChatbotFields()">Generate Chatbot Fields</button>
                        </form>
                    </div>
                    <div id="chatbotFieldsContainer" class="mt-4"></div>
                </div>

                <!-- Edit Feedback Section -->
                <div id="editFeedback" class="section">
                    <h2 class="mt-4">Create Feedback Form</h2>
                    <div class="card shadow p-4">
                        <form id="feedbackForm">
                            <div class="form-group">
                                <label for="feedbackExperimentTopic">Select Experiment Topic</label>
                                <select class="form-control" id="feedbackExperimentTopic" required>
                                    <!-- Options will be populated dynamically -->
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="feedbackSelectChatbot">Select Chatbot</label>
                                <select class="form-control" id="feedbackSelectChatbot" required>
                                    <!-- Chatbot options will be populated based on selected experiment -->
                                </select>
                            </div>
                            <div class="form-group">
                                <button type="button" class="btn btn-secondary" id="addFeedbackQuestion">Add Feedback Question</button>
                            </div>
                            <ul id="feedbackQuestionsList" class="list-group mb-3">
                                <!-- Dynamically added feedback questions with options -->
                            </ul>
                            <button type="submit" class="btn btn-primary btn-block">Submit</button>
                        </form>
                    </div>
                </div>

                <!-- View Feedback Section -->
                <div id="viewFeedback" class="section">
                    <h2 class="mt-4">View All Feedback Forms</h2>
                    <div class="form-group">
                        <label for="feedbackFormDropdown">Select Feedback Form</label>
                        <select class="form-control" id="feedbackFormDropdown">
                            <!-- Feedback forms will be populated dynamically -->
                        </select>
                    </div>
                    <div id="feedbackFormDisplay" class="mt-4">
                        <!-- Feedback form content will be displayed here -->
                    </div>
                </div>


                <div id="seeRepositories" class="section">
                    <h2 class="mt-4">View Data Table</h2>
                    <div class="card shadow p-4">
                        <table class="table table-striped table-hover">
                            <thead class="thead-dark">
                                <tr>
                                    <th>ID</th>
                                    <th>Source</th>
                                    <th>Header</th>
                                    <th>Description</th>
                                    <th>Issue</th>
                                    <th>Explanation</th>
                                </tr>
                            </thead>
                            <tbody id="dataTableBody">
                                <!-- Rows will be dynamically added here -->
                            </tbody>
                        </table>
                    </div>
                    <!-- Hover Card -->
                    <div id="hoverCard" class="card shadow" style="position: absolute; display: none; z-index: 1000; max-width: 300px; padding: 1rem;">
                        <div id="cardContent"></div>
                    </div>
                </div>



                <!-- Delete Experiment Section -->
                <div id="deleteExperiment" class="section">
                    <h2 class="mt-4">Delete Experiment</h2>
                    <div class="card shadow p-4">
                        <form id="deleteExperimentForm">
                            <div class="form-group">
                                <label for="deleteExperimentTopic">Select Experiment to Delete</label>
                                <select class="form-control" id="deleteExperimentTopic" required>
                                    <!-- Options will be populated dynamically -->
                                </select>
                            </div>
                            <button type="button" class="btn btn-danger btn-block" onclick="deleteExperiment()">Delete</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- /#page-content-wrapper -->
    </div>
    <!-- /#wrapper -->

    <!-- Bootstrap and necessary plugins -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
